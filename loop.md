# 迴圈

本文將詳細解說如何使用迴圈來執行重複的程式碼。

文中將以 `cout<<"灰色底字"<<endl` 來標示一些程式碼，或是

    cout<<"灰色底字"<<endl;
   
來標示多行程式碼。

## for 迴圈
### 基本格式

`for` 迴圈的基本格式如下：
    
    for( A ; B ; D )
    {
      C
    }

第一行是一個 `for( ; ; )` ，中間由兩個分號分隔（切記不是冒號！！）。這三個格子 A、B、D 分別在做什麼我們會在下面的 **執行步驟** 中詳細解說。

緊接著是「一對」大括號 `{ ... }` ，中間可以放任意行數的程式碼，你想重複執行的程式碼就是放在這裡。

> 註：A、B、C、D 為說明用的代號

### 執行步驟

上述 **基本格式** 中，程式碼的執行順序如下：

> A -> if(B) -> C -> D -> if(B) -> C -> D -> ... -> if(B)

注意到 B 外面放了 `if` 嗎？

沒錯，這裡的 B 是一個判斷式，在 `for` 迴圈的每一圈開始前檢查 B 是否成立，如果成立就再跑一圈 C -> D ，不成立則跳出。

------------

以下是一個 `for` 迴圈的簡單範例：

	for( int i=0 ; i<=5 ; i++ )
	{
		cout<<"HELLO!"<<endl;
	}
    
這個迴圈的輸出如下：
    
	HELLO!
	HELLO!
	HELLO!
	HELLO!
	HELLO!

剛開始看或許很難理解，我們用上面的 A 、 B 、 C 、 D 來一步一步觀察吧！

#### A 部分 : `int i=1`

在用 `for` 迴圈時，我們通常會宣告一個變數來控制這個迴圈的次數（也就是現在是第幾圈），在這邊就是指我們上面的 `i` ，我們稱它為「控制變數」。

再複習一次 `for` 迴圈的流程：

> A -> if(B) -> C -> D -> if(B) -> C -> D -> ... -> if(B)

整個 `for` 迴圈只會執行一次 A！沒錯，`for` 迴圈的 `for( 這個位置 ; ; )` 就是專門給你宣告控制變數的！

> 註：控制變數習慣用 `i` , `j` , `k` 依序命名，因此我們在寫程式時也會盡量不在迴圈以外的地方使用 `i` , `j` , `k` 作為變數名稱。

#### B 部分 : `i<=5`

B 部分可以稱做是迴圈的核心，是判斷迴圈要不要繼續執行的條件，可以把他看成是一個 `if` 來理解。

事不宜遲，讓我們再複習一次 `for` 迴圈的流程～

> A -> if(B) -> C -> D -> if(B) -> C -> D -> ... -> if(B)

你可以看到，在每一圈（ if(B) -> C -> D ）的一開始，「B 是否成立？」會先被檢查一次，只有在 B 成立的時候才會繼續完成 C -> D ，B 不成立直接跳出迴圈。

以上方範例為例，我們可以把整個流程解讀成：

    
	int i=1;              // A 部分，宣告控制變數 i
	
	//if(i<=5)            // B 部分，此時 i 的值為 1，i<=5 成立，執行 C、D
	cout<<"HELLO!"<<endl; // C 部分
	i++;                  // D 部分，i 增加為 2
	
	//if(i<=5)            // B 部分，此時 i 的值為 2，i<=5 成立，執行 C、D
	cout<<"HELLO!"<<endl; // C 部分
	i++;                  // D 部分，i 增加為 3
	
	//if(i<=5)            // B 部分，此時 i 的值為 3，i<=5 成立，執行 C、D
	cout<<"HELLO!"<<endl; // C 部分
	i++;                  // D 部分，i 增加為 4
	
	//if(i<=5)            // B 部分，此時 i 的值為 4，i<=5 成立，執行 C、D
	cout<<"HELLO!"<<endl; // C 部分
	i++;                  // D 部分，i 增加為 5
	
	//if(i<=5)            // B 部分，此時 i 的值為 5，i<=5 成立，執行 C、D
	cout<<"HELLO!"<<endl; // C 部分
	i++;                  // D 部分，i 增加為 6
	
	//if(i<=5)            // B 部分，此時 i 的值為 6，i<=5 「不」成立，離開

B 部分的作用看出來了嗎？

在 B 成立時，C 與 D 會不停地重複執行，直到 B 不成立為止。

> 註：如果不使用 `for` 迴圈

#### C 部分 : `{ cout<<"HELLO!"<<endl; }`

聰明的你看完 B 的說明後或許已經瞭解 C 與 D 的作用是什麼了。

C 部分放的是你希望重複執行的程式碼，用一對 `{ ... }` 圍著，裡面可以放任意行數哦！

> 註：如果你的 C 部分只有一行，你也可以選擇省略大括號，即：

    for( int i=1 ; i<=5 ; i++) cout<<"HELLO!"<<endl;
	
> 上方的結果與原來的程式碼：

	for( int i=0 ; i<=5 ; i++ )
	{
		cout<<"HELLO!"<<endl;
	}
	
> 完全相同！！（小提示：`if` 也有一樣的效果哦！）

#### D 部分 : `i++`

還記得 `i++` 的意思吧！不記得也沒關係，先來個小複習。

`i++` 、 `i+=1` 與 `i=i+1` 都是把 `i` 的值增加 1 的意思！

D 部分在每一圈結束前執行，通常會拿來修改控制變數的值。在這裡我們把他拿來讓 `i` 增加 1。

在這個部分常見的寫法還有：

`i--` ：讓 `i` 減少 1

`i+=2` ：讓 `i` 每圈增加 2

`i*=2` ：讓 `i` 每圈乘以 2

> 註：在 A 部分與 D 部分中，並沒有強制要求一定要執行與控制變數有關的程式碼，不過大多數時候都還是會將這兩個部分用作 宣告/修改 控制變數。不如說，`for` 迴圈之所以會分成三個部分，就是為了讓寫程式的人能夠更加方便地運用控制變數！

### 各種不同的 for 迴圈

或許看完上面的文字敘述還是無法讓你充分理解，沒關係！我在下面提供了各種不同的 `for` 迴圈範例以及他們的執行結果。可以試著打開你的 DevC++，複製程式碼並修改範例中的數值，或許能讓你更加熟悉 `for` 這個語法。

#### 1. 從 1 印到 5

程式碼：
    
	for( int i=1 ; i<=5 ; i++)
	{
		cout<<i<<endl;
	}

------------

輸出：
    
	1
	2
	3
	4
	5

------------

說明：

控制變數不只能控制迴圈的執行次數，有時也能拿來運算，或像這個例子，印出 1～5。

> 小挑戰：試著讓它不要換行 ex. `1 2 3 4 5 `

#### 2. 從 1 印到 n

程式碼：
    
	int n;
	cin>>n;
	for( int i=1 ; i<=n ; i++)
	{
		cout<<i<<endl;
	}

------------

輸出：
    
	1
	2
	3
	.
	.    // 中間省略
	.
	20   // 輸入 20

------------

說明：

`for` 的執行次數能簡單地像這樣讓使用者輸入來決定！

> 小挑戰：試著修改上面的程式碼，讓輸出從 n 印到 1

#### 3. n! 階乘

程式碼：
    
	int n, ans=1;
	cin>>n;
	for( int i=1 ; i<=n ; i++)
	{
		ans=ans*i;
	}
	cout<<n<<"! = "<<ans<<endl;

------------

輸出：
    
	5! = 120 // 輸入 5

------------

說明：

一個把控制變數用來運算的例子，迴圈也是幫助運算的好工具！

#### 4. 輸出正整數中小於等於 n 的偶數

程式碼：
    
	int n;
	cin>>n;
	for(int i=2 ; i<=n ; i+=2 )
	{
		cout<<i<<endl;
	}

------------

輸出：
    
	2
	4
	6
	8
	10 // 輸入 11

------------

說明：

A 部分與 D 部分可以不用執著於 `int i=1` 跟 `i++` ，這個範例就能說明他的其他用法。

> 小挑戰：試著輸出小於 n 的 3 的倍數

## while 迴圈

### 基本格式

`while` 迴圈的基本格式如下：
    
	while( B )
	{
		C
	}

第一行是一個 `while( )` ，第二行則是「一對」大括號 `{ ... }` ，中間可以放任意行數的程式碼。

> 註：A、B、C、D 為說明用的代號

### 執行步驟

上述 **基本格式** 中，程式碼的執行順序如下：

> if(B) -> C -> if(B) -> C -> if(B) -> C ... -> if(B)

其實，`while` 迴圈就是少了控制變數的 `for` 迴圈罷了。

因此：
    
	for( ; B ; )                 //突然發現這個表情有點可愛...
	{
		C
	}

與：
    
	while( B )
	{
		C
	}

是完全一樣的！

因此，就以 `for` 迴圈的同一個範例為例：

	for( int i=0 ; i<=5 ; i++ )
	{
		cout<<"HELLO!"<<endl;
	}

你可以將他換成 `while`，如下：
    
	int i=0;
	while( i<=5 )
	{
		cout<<"HELLO!"<<endl;
		i++;
	}

兩者執行結果皆會是：
    
	HELLO!
	HELLO!
	HELLO!
	HELLO!
	HELLO!

這樣大概能感覺到 `for` 與 `while` 為什麼能做到想同的事情了吧！

------------

那麼接下來一樣用一個範例來解釋 `while` 的執行步驟吧：
    
	int total=0,n;
	cin>>n;
	while(n!=0)
	{
		total+=n%10;
		n/=10;
	}
	cout<<total<<endl;

這個程式能讓使用者輸入 `n`，按下 Enter 後則會將 `n` 的每一位數字都加起來。

在開始之前我們一樣先回憶一下 `while` 的執行步驟：

> if(B) -> C -> if(B) -> C -> if(B) -> C ... -> if(B)

接著一樣分部分進行說明。

#### B 部分 : `while(n!=0)`

如果 `n` 等於 0 ，表示已經計算完成，結束迴圈。

#### C 部分 : `{ total+=n%10; n/=10; }`

C 部分（也就是你要反覆執行的 code），我們將整個數字的個位數字「拆開來」，然後把他加到 `total` 裡去。

舉個例子來說，如果今天你輸入了：
    
	78763

C 部分做的事則是：

> 78763 % 10 = 3
> total += 3
> 78763 / 10 = 7876     （記得 `int` 除法捨去小數嗎？）

於是我們成功將 78763 「分成」 7876 與 3 兩個部分，然後把 3 加到了 `total` 裡面。

那麼你或許猜到了，第二圈做的則是把 7876 分成 787 與 6 兩個部分，然後把 6 加到 `total` 。

而我中間則會繼續做 78 與 7 -> 7 與 8 兩圈，把 7 與 8 加入 `total`。

我們特別來觀察一下最後一圈。此時

> n=7, total=24

執行最後一圈：
    
	total+=n%10;       // 24 + 7 = 31
	n/=10;             // 7 / 10 = 0

然後下一圈：
    
	while( n!=0 )      // 此時 n=0，代表沒有東西要加了，結束迴圈。

這樣幾個單純的步驟，我們就成功將一個整數的每一位數加起來了！抓到 `while` 迴圈的感覺了嗎？

### while 迴圈範例

#### 費氏數列

這個範例會帶領你印出費氏數列小於 n 的部分。

如果你還不知道費氏數列是什麼，這邊簡單做個解釋：

令 $$f(1) = 1, f(2) = 1$$
而 $$f(n) = f(n-1) + f(n-2)$$

如此一來就能夠成一個像這樣的數列：

`1 1 2 3 5 8 13 21 ...`

那麼事不宜遲，直接進入來看程式碼吧：
    
	int a=1, b=1, c=a+b, n;
	cin>>n;
	cout<<a<<" "<<b<<" ";
	while( c<=n )
	{
		cout<<c<<" ";
		a=b;
		b=c;
		c=a+b;
	}

------------

輸出：
    
	1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 // 輸入 1000

------------

說明：

一開始看上去肯定很複雜，因此我們逐行進行說明吧！

	int a=1, b=1, c=a+b, n;

1 - 宣告四個邊數，`n` 拿來存使用者輸入，也就是整個 `while` 迴圈超過哪個數字才停下。

而 `a`、`b`、`c` 分別用來存放 $$f(n-2),f(n-1)$$及$$f(n)$$。

------------

	cin>>n;

2 - 讓使用者進行輸入

------------

	cout<<a<<" "<<b<<" ";

3 - 先輸出前兩項，也就是 $$f(1)$$ 與 $$f(2)$$ 。

------------

	while( c<=n )

4 - 在「這一項」，也就是 `c` 比 `n` 還要小時繼續執行 `while` 迴圈，換句話說就是，`c` 超過 `n` 時就終止迴圈。

------------

		cout<<c<<" ";

5 - 將「這一項」，也就是 `c` 輸出。

------------

		a=b;
		b=c;

6 - 往後移一格

用 $$f(n-1)$$ 覆蓋 $$f(n-2)$$ ，也就是用 `b` 覆蓋 `a`，「前一項」覆蓋「前前一項」

再來則用 $$f(n)$$ 覆蓋 $$f(n-1)$$ ，也就是用 `c` 覆蓋 `b`，「這一項」覆蓋「前一項」

這時 `a` 是「前一項」，`b` 是「這一項」

------------

		c=a+b;

7 - 計算「下一項」

接著來計算 $$f(n+1)$$，也就是「下一項」：`c = a+b`，用「下一項」覆蓋「這一項」

------------

8 - 跳到第 4 步

這時的 `c`，在這一圈中的「下一項」會是下一圈的「這一項」哦。（可以拿一張紙寫下來模擬看看電腦的執行）

------------

說明到此結束，這不是能瞬間就搞懂得東西，與 `for` 迴圈一樣，開啟你的 DevC++，動手改一改能讓你更快地理解迴圈到底在做什麼。

## for 與 while，如何選擇該用誰？

雖然 `for` 與 `while` 本質上相同，也能做到一樣的事情，但他們各有自己的使用目的（否則就不會被分成兩種了吧）。因此，在對的時候選擇對的迴圈是很重要的！

接下來就來比較一下 `for` 與 `while` 的不同吧！

|                  | 格式      | 控制變數 | 用途 |
| ----------- | -------- | --------- | ----------------------------------------------------- |
| for 迴圈     | for( ; ; ) | 有           | 有一定執行順序、次數或規律的時候使用                  |
| while 迴圈 | while( ) | 無           | 確認是否還在一個狀態內，不確定有多少次數時使用 |

剛學迴圈時，許多人會搞不清楚到底何時用 `for`，何時用 `while`，因此常拿 `while` 去做 `for` 該做的事，反之亦然，所以確保自己瞭解兩者的差異與用途是很重要的

> 小提示：事實上就如上表所述，初學時大部分時候都使用 `for` 居多，真的不知道該用什麼的時候就先從 `for` 下手吧！

## break 與 continue

### 簡介

為了能更靈活的操控迴圈，`break` 與 `continue` 可是不可或缺的兩個語法。

接著就讓我們一起看看他的到底有什麼用途吧！

### break

#### 功用

結束這個迴圈，「立刻」結束。

> 註：可以想像成是瞬間跳到迴圈的「下方大括號」後一行。

#### 使用範例

程式碼：
    
	int i;
	for(i=1;i<=10;i++)
	{
		if(i%7==0)break;
		cout<<i<<endl;
	}

------------

輸出：
    
	1
	2
	3
	4
	5
	6

------------

說明：

到 `i=7` 時，C 部分中的 `i%7==0` 成立 -> 執行 `if` 裡面的程式碼 `break`，迴圈強制跳離。

> 註：程式結束時，`i` 的值會是 7 而不是 8 哦！`break` 可以想成是跳到下面大括號的下一行，「不會」再執行一次 `i++`。


### continue

#### 功用

結束這一圈。

準確一點來說是跳過 C 部分 `continue` 以後剩下的所有內容直接到 D 部分。注意，D 部分「會被執行」！

#### 使用範例
    
程式碼：
    
	int i;
	for(i=1;i<=10;i++)
	{
		if(i%3==0)continue;
		cout<<i<<endl;
	}

------------

輸出：
    
	1
	2
	4
	5
	7
	8
	10

------------

說明：

在 `i` 等於 3 的倍數時，`i%3==0` 成立，跳過 `continue` 以後的所有程式碼直接到 D 部分做 `i++`

## 結語

`for` 與 `while` 剛開始學絕對不好理解，因此需要多練習以及熟悉，等到運用熟練後就會發現他們也絕非什麼難事哦！
